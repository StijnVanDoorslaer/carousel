(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{351:function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(9),react=__webpack_require__(0),react_default=__webpack_require__.n(react),popmotion_es=__webpack_require__(64),Lethargy=function(){function Lethargy(stability,sensitivity,tolerance,delay){void 0===stability&&(stability=8),void 0===sensitivity&&(sensitivity=100),void 0===tolerance&&(tolerance=1.1),void 0===delay&&(delay=150),this.stability=stability,this.sensitivity=sensitivity,this.tolerance=tolerance,this.delay=delay,this.lastUpDeltas=Array.from(Array(2*this.stability)),this.lastDownDeltas=Array.from(Array(2*this.stability)),this.deltasTimestamp=Array.from(Array(2*this.stability))}return Lethargy.prototype.check=function(delta){return this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),0!==delta&&(delta>0?(this.lastUpDeltas.push(delta),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(delta),this.lastDownDeltas.shift(),this.isInertia(-1)))},Lethargy.prototype.isInertia=function(direction){var lastDeltas=-1==direction?this.lastDownDeltas:this.lastUpDeltas;if(null==lastDeltas[0])return direction;if(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&lastDeltas[0]==lastDeltas[2*this.stability-1])return!1;var lastDeltasOld=lastDeltas.slice(0,this.stability),lastDeltasNew=lastDeltas.slice(this.stability,2*this.stability),oldSum=lastDeltasOld.reduce((function(t,s){return t+s})),newSum=lastDeltasNew.reduce((function(t,s){return t+s})),oldAverage=oldSum/lastDeltasOld.length,newAverage=newSum/lastDeltasNew.length;return Math.abs(oldAverage)<Math.abs(newAverage*this.tolerance)&&this.sensitivity<Math.abs(newAverage)&&direction},Lethargy}(),index_esm=__webpack_require__(350),deep_equal=__webpack_require__(349),deep_equal_default=__webpack_require__.n(deep_equal);__webpack_require__.d(__webpack_exports__,"b",(function(){return useCarousel})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Carousel}));var useCarousel=function(options){var _a=Object(react.useState)(0),current=_a[0],setCurrent=_a[1],_b=Object(react.useState)(0),total=_b[0],setTotal=_b[1],has=function(index){return index>=0&&index<total},goTo=function(index){has(index)&&setCurrent(index)};return Object(tslib_es6.a)({current:current,setCurrent:setCurrent,total:total,setTotal:setTotal,has:has,hasNext:function(){return has(current+1)},hasPrevious:function(){return has(current-1)},goTo:goTo,goNext:function(){return goTo(current+1)},goPrevious:function(){return goTo(current-1)},isActive:function(childIndex){console.log("todo")}},options)},mix=popmotion_es.a.getValueFromProgress,closest=function(snaps,value){return snaps.reduce((function(prev,curr){return Math.abs(curr-value)<Math.abs(prev-value)?curr:prev}))},snapToAnimation=function(options){return Object(popmotion_es.d)(Object(tslib_es6.a)(Object(tslib_es6.a)({},options),{stiffness:100,damping:20}))},Carousel=function(_a){var className=_a.className,children=_a.children,current=_a.current,setCurrent=_a.setCurrent,total=_a.total,setTotal=_a.setTotal,_b=_a.snapTo,snapTo=void 0===_b?"pages":_b,_c=_a.tug,tug=void 0===_c?.4:_c,_d=_a.power,power=void 0===_d?.25:_d,dom=Object(react.useRef)(null),offset=Object(react.useMemo)((function(){return Object(popmotion_es.f)(0)}),[]),snapsRef=Object(react.useRef)({pages:[0],elements:[0]}),widthRef=Object(react.useRef)(0),preventClick=Object(react.useRef)(!1),activePage=Object(react.useRef)(0),currentRef=Object(react.useRef)(current);currentRef.current=current;var content=function(){return dom.current.firstChild},max=function(){return content().scrollWidth-dom.current.offsetWidth},update=Object(react.useCallback)((function(force){var snaps=snapsRef.current,newSnaps=function(dom){var pageWidth=dom.offsetWidth;return Array.from(dom.firstChild.children).reduce((function(_a,child,i){var pages=_a.pages,elements=_a.elements,prevPage=pages[pages.length-1],prevElement=elements[elements.length-1],offset=prevElement+child.offsetWidth;return elements.push(offset),prevElement>0&&offset-prevPage>pageWidth&&pages.push(prevElement),{pages:pages,elements:elements}}),{pages:[0],elements:[0]})}(dom.current);if(force||!deep_equal_default()(snaps,newSnaps)){setTotal(Math.ceil(newSnaps.pages.length)),snapsRef.current=newSnaps;var pages=newSnaps.pages;spring(pages[currentRef.current])}}),[]),setActivePage=Object(react.useCallback)((function(destination){var pages=snapsRef.current.pages;setCurrent(pages.indexOf(closest(pages,destination)))}),[]),spring=Object(react.useCallback)((function(destination,animate){void 0===animate&&(animate=snapToAnimation);var from=offset.get(),to=-Math.min(destination,max());setActivePage(-to),from!==to&&animate({from:from,to:to,velocity:offset.getVelocity()}).start(offset)}),[]);return Object(react.useEffect)((function(){var pageWidth=dom.current.offsetWidth,pageChange=activePage.current!==current;(pageChange||pageWidth!==widthRef.current)&&(widthRef.current=pageWidth,activePage.current=current,update(pageChange))})),Object(react.useEffect)((function(){var contentStyler=Object(popmotion_es.e)(content()),clearSubscription=offset.subscribe((function(offset){contentStyler.set("x",offset)})).unsubscribe,clearTrack=function(){},overDrag=function(v){var from=-max();return v<from?mix(from,v,tug):v>0?mix(0,v,tug):v},clearMove=Object(popmotion_es.b)(dom.current,"mousedown touchstart").start((function(event){var start=offset.get();event instanceof MouseEvent&&1!==event.which||(preventClick.current=!1,clearTrack=Object(popmotion_es.c)({x:start,preventDefault:!1}).pipe((function(pos){return pos.x}),overDrag).start(offset).stop,Object(popmotion_es.b)(document,"mouseup touchend",{once:!0}).start((function(){return function(start){var snaps=snapsRef.current[snapTo],from=offset.get(),velocity=offset.getVelocity(),distance=from-start,amplitude=power*velocity,idealTarget=Math.round(from+amplitude),snap=closest(snaps,-idealTarget);preventClick.current=Math.abs(distance)>1,spring(snap)}(start)})))})).stop,onClick=function(e){if(!preventClick.current)return clearTrack();e.stopPropagation(),e.preventDefault()},lethargy=new Lethargy,wheelPanning=!1,onWheel=function(e){var pageIndex,pages,angle=popmotion_es.a.angle({x:e.deltaX,y:e.deltaY}),direction=lethargy.check(e.deltaX);(function(angle){return angle<=-45&&angle>=-135||angle<=135&&angle>=45})(angle)||(e.stopPropagation(),e.preventDefault(),!1!==direction&&(wheelPanning||(pageIndex=current+direction,pages=snapsRef.current.pages,pageIndex<0||pageIndex>total-1||spring(pages[pageIndex]),wheelPanning=!0,setTimeout((function(){return wheelPanning=!1}),500))))};dom.current.addEventListener("click",onClick,!0);dom.current.addEventListener("wheel",onWheel);var onResize=Object(index_esm.a)(250,(function(){return update()}));window.addEventListener("resize",onResize);return function(){clearSubscription(),clearMove(),clearTrack(),dom.current.removeEventListener("click",onClick,!0),dom.current.removeEventListener("wheel",onWheel),window.removeEventListener("resize",onResize)}}),[]),react_default.a.createElement("div",{ref:dom,style:{overflow:"hidden",height:"100%",width:"100%",userSelect:"none",touchAction:"pan-y pinch-zoom"},className:className&&String(className)},react_default.a.createElement("div",{style:{height:"100%",display:"flex"},onDragStart:function(e){return e.preventDefault()}},children))};try{useCarousel.displayName="useCarousel",useCarousel.__docgenInfo={description:"",displayName:"useCarousel",props:{snapTo:{defaultValue:{value:"pages"},description:"",name:"snapTo",required:!1,type:{name:'"elements" | "pages"'}},tug:{defaultValue:{value:.4},description:"",name:"tug",required:!1,type:{name:"number"}},power:{defaultValue:{value:.25},description:"",name:"power",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/carousel.tsx#useCarousel"]={docgenInfo:useCarousel.__docgenInfo,name:"useCarousel",path:"src/carousel.tsx#useCarousel"})}catch(__react_docgen_typescript_loader_error){}try{Carousel.displayName="Carousel",Carousel.__docgenInfo={description:"",displayName:"Carousel",props:{current:{defaultValue:null,description:"",name:"current",required:!0,type:{name:"number"}},setCurrent:{defaultValue:null,description:"",name:"setCurrent",required:!0,type:{name:"(page: number) => void"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"number"}},setTotal:{defaultValue:null,description:"",name:"setTotal",required:!0,type:{name:"(amount: number) => void"}},snapTo:{defaultValue:{value:"pages"},description:"",name:"snapTo",required:!1,type:{name:'"elements" | "pages"'}},tug:{defaultValue:{value:.4},description:"",name:"tug",required:!1,type:{name:"number"}},power:{defaultValue:{value:.25},description:"",name:"power",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | { toString: () => string; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/carousel.tsx#Carousel"]={docgenInfo:Carousel.__docgenInfo,name:"Carousel",path:"src/carousel.tsx#Carousel"})}catch(__react_docgen_typescript_loader_error){}},352:function(module,exports,__webpack_require__){__webpack_require__(353),__webpack_require__(464),module.exports=__webpack_require__(465)},373:function(module,exports){},465:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(157);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(__webpack_require__(640),module)}.call(this,__webpack_require__(255)(module))},640:function(module,exports,__webpack_require__){var map={"./stories/index.stories.tsx":641};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=640},641:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(157),_storybook_addon_info__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(342),___WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(351),stories=Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("Components",module);stories.addDecorator(_storybook_addon_info__WEBPACK_IMPORTED_MODULE_3__.withInfo),stories.addParameters({info:{inline:!0}}),stories.add("Carousel",(function(){var carousel=Object(___WEBPACK_IMPORTED_MODULE_4__.b)();return react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(___WEBPACK_IMPORTED_MODULE_4__.a,Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},carousel),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{style:{minWidth:"100%",height:"300px",background:"red",color:"white"}},"a"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{style:{minWidth:"100%",height:"300px",background:"red",color:"white"}},"b"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{style:{minWidth:"100%",height:"300px",background:"red",color:"white"}},"b"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{style:{minWidth:"100%",height:"300px",background:"red",color:"white"}},"b")),"Total pages: ",carousel.total,react__WEBPACK_IMPORTED_MODULE_1__.createElement("br",null),"Current page: ",carousel.current,react__WEBPACK_IMPORTED_MODULE_1__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_1__.createElement("button",{onClick:function(){return carousel.goPrevious()}},"Previous"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_1__.createElement("button",{onClick:function(){return carousel.goNext()}},"Next"))}))}.call(this,__webpack_require__(255)(module))},644:function(module,exports,__webpack_require__){var map={"./nestedObjectAssign":305,"./nestedObjectAssign.js":305};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=644}},[[352,1,2]]]);
//# sourceMappingURL=main.2ec71d43d117dc1d30c3.bundle.js.map