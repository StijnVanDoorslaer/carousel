(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{261:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a="```typescript\r\nconst a = 'hello'\r\n```\r\n"},262:function(module,exports,__webpack_require__){__webpack_require__(263),__webpack_require__(374),module.exports=__webpack_require__(375)},283:function(module,exports){},375:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(82),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(83);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__.withKnobs),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(__webpack_require__(562),module)}.call(this,__webpack_require__(202)(module))},562:function(module,exports,__webpack_require__){var map={"./stories/carousel.stories.tsx":563};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=562},563:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(564),__webpack_require__(83)),_storybook_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__),___WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(61),_carousel_md__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(261),stories=Object(_storybook_react__WEBPACK_IMPORTED_MODULE_3__.storiesOf)("Carousel",module),SimpleExample=function(){var carousel=Object(___WEBPACK_IMPORTED_MODULE_5__.b)(),slides=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__.number)("Slides",4,{range:!0,min:0,max:100,step:1});return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(___WEBPACK_IMPORTED_MODULE_5__.a,Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},carousel,{className:"carousel"}),Array.from(Array(slides)).map((function(_,i){return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"slide "+(carousel.isActive(i)?"is-active":""),key:i},i+1)}))),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"options"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",null,"Total pages: ",carousel.total),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",null,"Current page: ",carousel.current),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("button",{onClick:function(){return carousel.goPrevious()}},"Previous"),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("button",{onClick:function(){return carousel.goNext()}},"Next")))};stories.add("Simple",(function(){return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(SimpleExample,null)}));var ContainerExample=function(){var snapTo=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_2__.select)("Snap to",{Pages:"pages",Elements:"elements"},"pages"),carousel=Object(___WEBPACK_IMPORTED_MODULE_5__.b)({snapTo:snapTo});return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{style:{overflow:"hidden"}},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"container"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(___WEBPACK_IMPORTED_MODULE_5__.a,Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},carousel,{full:!0,className:"carousel"}),Array.from(Array(30)).map((function(_,i){return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"card "+(carousel.isActive(i)?"is-active":""),key:i},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"slide"},i+1))}))),"Active page: ",carousel.current))};stories.add("In container",(function(){return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(ContainerExample,null)}),{notes:{markdown:_carousel_md__WEBPACK_IMPORTED_MODULE_6__.a}});var VariableWidth=function(){var carousel=Object(___WEBPACK_IMPORTED_MODULE_5__.b)();return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(___WEBPACK_IMPORTED_MODULE_5__.a,Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},carousel,{className:"carousel"}),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"slide is-active"},"1"),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"slide is-active",style:{minWidth:"25%"}},"2")),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"options"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",null,"Total pages: ",carousel.total),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",null,"Current page: ",carousel.current),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("button",{onClick:function(){return carousel.goPrevious()}},"Previous"),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("button",{onClick:function(){return carousel.goNext()}},"Next")))};stories.add("Variable Width",(function(){return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(VariableWidth,null)}))}.call(this,__webpack_require__(202)(module))},564:function(module,exports,__webpack_require__){var content=__webpack_require__(565);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(567)(content,options);content.locals&&(module.exports=content.locals)},565:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(566)(!1)).push([module.i,"body {\r\n\tfont-family: sans-serif;\r\n}\r\n\r\n* {\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.container {\r\n\tposition: relative;\r\n\tmax-width: 60%;\r\n\tmargin: 0 auto;\r\n}\r\n\r\n.container:after {\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tbottom: 0;\r\n\tright: 0;\r\n\tbox-shadow: inset 0 0 0 3px rgb(0, 183, 255);\r\n\tpointer-events: none;\r\n}\r\n\r\n.carousel {\r\n\theight: 400px !important;\r\n}\r\n\r\n.slide {\r\n\theight: 100%;\r\n\tmin-width: 100%;\r\n\tbackground: #eee;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tcolor: rgb(150, 150, 150);\r\n\tfont-size: 80px;\r\n\t-webkit-transition: opacity 0.7s ease-out;\r\n\ttransition: opacity 0.7s ease-out;\r\n}\r\n\r\n.slide.is-active {\r\n\topacity: 1;\r\n\tcolor: black;\r\n}\r\n\r\n.card {\r\n\topacity: 0.2;\r\n\tmin-width: 33.3333%;\r\n\tpadding: 0 10px;\r\n\t-webkit-transition: opacity 0.7s ease-out;\r\n\ttransition: opacity 0.7s ease-out;\r\n}\r\n\r\n.card.is-active {\r\n\topacity: 1;\r\n}\r\n\r\n.options {\r\n\tdisplay: flex;\r\n\tpadding: 20px 0;\r\n}\r\n\r\n.options > * {\r\n\tmargin-right: 20px;\r\n}\r\n",""])},61:function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(3),deep_equal=__webpack_require__(259),deep_equal_default=__webpack_require__.n(deep_equal),popmotion_es=__webpack_require__(42),react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_esm=__webpack_require__(260),Lethargy=function(){function Lethargy(stability,sensitivity,tolerance,delay){void 0===stability&&(stability=8),void 0===sensitivity&&(sensitivity=100),void 0===tolerance&&(tolerance=1.1),void 0===delay&&(delay=150),this.stability=stability,this.sensitivity=sensitivity,this.tolerance=tolerance,this.delay=delay,this.lastUpDeltas=Array.from(Array(2*this.stability)),this.lastDownDeltas=Array.from(Array(2*this.stability)),this.deltasTimestamp=Array.from(Array(2*this.stability))}return Lethargy.prototype.check=function(delta){return this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),0!==delta&&(delta>0?(this.lastUpDeltas.push(delta),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(delta),this.lastDownDeltas.shift(),this.isInertia(-1)))},Lethargy.prototype.isInertia=function(direction){var lastDeltas=-1==direction?this.lastDownDeltas:this.lastUpDeltas;if(null==lastDeltas[0])return direction;if(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&lastDeltas[0]==lastDeltas[2*this.stability-1])return!1;var lastDeltasOld=lastDeltas.slice(0,this.stability),lastDeltasNew=lastDeltas.slice(this.stability,2*this.stability),oldSum=lastDeltasOld.reduce((function(t,s){return t+s})),newSum=lastDeltasNew.reduce((function(t,s){return t+s})),oldAverage=oldSum/lastDeltasOld.length,newAverage=newSum/lastDeltasNew.length;return Math.abs(oldAverage)<Math.abs(newAverage*this.tolerance)&&this.sensitivity<Math.abs(newAverage)&&direction},Lethargy}();__webpack_require__.d(__webpack_exports__,"b",(function(){return useCarousel})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Carousel}));var useCarousel=function(options){var _a=Object(react.useState)(0),current=_a[0],setCurrent=_a[1],_b=Object(react.useState)(0),total=_b[0],setTotal=_b[1],isActiveRef=Object(react.useRef)(null),has=function(index){return index>=0&&index<total},goTo=function(index){has(index)&&setCurrent(index)};return Object(tslib_es6.a)({current:current,setCurrent:setCurrent,total:total,setTotal:setTotal,has:has,hasNext:function(){return has(current+1)},hasPrevious:function(){return has(current-1)},goTo:goTo,goNext:function(){return goTo(current+1)},goPrevious:function(){return goTo(current-1)},isActive:function(childIndex){return!!isActiveRef.current&&isActiveRef.current(current,childIndex)},setIsActive:function(update){return isActiveRef.current=update()}},options)},mix=popmotion_es.a.getValueFromProgress,closest=function(snaps,value){return snaps.reduce((function(prev,curr){return Math.abs(curr-value)<Math.abs(prev-value)?curr:prev}))},snapToAnimation=function(options){return Object(popmotion_es.d)(Object(tslib_es6.a)(Object(tslib_es6.a)({},options),{stiffness:100,damping:20}))},Carousel=function(_a){var className=_a.className,children=_a.children,current=_a.current,setCurrent=_a.setCurrent,total=_a.total,setTotal=_a.setTotal,setIsActive=_a.setIsActive,_b=_a.snapTo,snapTo=void 0===_b?"pages":_b,_c=_a.tug,tug=void 0===_c?.4:_c,_d=_a.power,power=void 0===_d?.25:_d,_e=_a.full,full=void 0!==_e&&_e,dom=Object(react.useRef)(null),offset=Object(react.useMemo)((function(){return Object(popmotion_es.f)(0)}),[]),snapsRef=Object(react.useRef)({pages:[0],elements:[0]}),widthRef=Object(react.useRef)(0),preventClick=Object(react.useRef)(!1),activePage=Object(react.useRef)(0),options={tug:tug,power:power,snapTo:snapTo},optionsRef=Object(react.useRef)(options),content=function(){return dom.current.firstChild},max=function(){return content().scrollWidth-dom.current.offsetWidth},update=Object(react.useCallback)((function(force){var snaps=snapsRef.current,newSnaps=function(dom){var pageWidth=dom.offsetWidth;return Array.from(dom.firstChild.children).reduce((function(_a,child,i){var pages=_a.pages,elements=_a.elements,prevPage=pages[pages.length-1],prevElement=elements[elements.length-1],offset=prevElement+child.offsetWidth;return elements.push(offset),prevElement>0&&offset-prevPage>pageWidth+5&&pages.push(prevElement),{pages:pages,elements:elements}}),{pages:[0],elements:[0]})}(dom.current);if(force||!deep_equal_default()(snaps,newSnaps)){setTotal(Math.ceil(newSnaps.pages.length)),snapsRef.current=newSnaps;var pages=newSnaps.pages;spring(pages[activePage.current])}}),[]),setActivePage=Object(react.useCallback)((function(destination){var pages=snapsRef.current.pages,newPage=destination===max()?pages.length-1:pages.indexOf(closest(pages,destination));activePage.current=newPage,setCurrent(newPage)}),[]),spring=Object(react.useCallback)((function(destination,animate){void 0===animate&&(animate=snapToAnimation);var from=offset.get(),to=-Math.min(destination,max());setActivePage(-to),from!==to&&animate({from:from,to:to,velocity:offset.getVelocity()}).start(offset)}),[]);return Object(react.useEffect)((function(){var pageWidth=dom.current.offsetWidth,pageChange=activePage.current!==current;widthRef.current=pageWidth,activePage.current=current,optionsRef.current={tug:tug,power:power,snapTo:snapTo},update(pageChange)})),Object(react.useEffect)((function(){var contentStyler=Object(popmotion_es.e)(content()),clearSubscription=offset.subscribe((function(offset){contentStyler.set("x",offset)})).unsubscribe,clearTrack=function(){},overDrag=function(v){var from=-max();return v<from?mix(from,v,tug):v>0?mix(0,v,tug):v},clearMove=Object(popmotion_es.b)(dom.current,"mousedown touchstart").start((function(event){var start=offset.get();event instanceof MouseEvent&&1!==event.which||(preventClick.current=!1,clearTrack=Object(popmotion_es.c)({x:start,preventDefault:!1}).pipe((function(pos){return pos.x}),overDrag).start(offset).stop,Object(popmotion_es.b)(document,"mouseup touchend",{once:!0}).start((function(){return function(start){var snapTo=optionsRef.current.snapTo,snaps=snapsRef.current[snapTo],from=offset.get(),velocity=offset.getVelocity(),distance=from-start,amplitude=power*velocity,idealTarget=Math.round(from+amplitude),snap=closest(snaps,-idealTarget);preventClick.current=Math.abs(distance)>1,spring(snap)}(start)})))})).stop,onClick=function(e){if(!preventClick.current)return clearTrack();e.stopPropagation(),e.preventDefault()},lethargy=new Lethargy,wheelPanning=!1,onWheel=function(e){var pageIndex,pages,angle=popmotion_es.a.angle({x:e.deltaX,y:e.deltaY}),direction=lethargy.check(e.deltaX);(function(angle){return angle<=-45&&angle>=-135||angle<=135&&angle>=45})(angle)||(e.stopPropagation(),e.preventDefault(),!1!==direction&&(wheelPanning||(pageIndex=current+direction,pages=snapsRef.current.pages,pageIndex<0||pageIndex>total-1||spring(pages[pageIndex]),wheelPanning=!0,setTimeout((function(){return wheelPanning=!1}),500))))};dom.current.addEventListener("click",onClick,!0);dom.current.addEventListener("wheel",onWheel);var onResize=Object(index_esm.a)(250,(function(){return update()}));window.addEventListener("resize",onResize);return setIsActive((function(){return function(current,childIndex){var _a=snapsRef.current,pages=_a.pages,elements=_a.elements,pos=elements[childIndex],next=elements[childIndex+1],page=pages[current],nextPage=pages[current+1]||1/0;return pos>=page&&next-5<=nextPage}})),function(){clearSubscription(),clearMove(),clearTrack(),dom.current.removeEventListener("click",onClick,!0),dom.current.removeEventListener("wheel",onWheel),window.removeEventListener("resize",onResize)}}),[]),react_default.a.createElement("div",{ref:dom,style:{overflow:full?void 0:"hidden",height:"100%",width:"100%",userSelect:"none",touchAction:"pan-y pinch-zoom"},className:className&&String(className)},react_default.a.createElement("div",{style:{height:"100%",display:"flex"},onDragStart:function(e){return e.preventDefault()}},children))};try{useCarousel.displayName="useCarousel",useCarousel.__docgenInfo={description:"",displayName:"useCarousel",props:{snapTo:{defaultValue:{value:"pages"},description:"",name:"snapTo",required:!1,type:{name:'"elements" | "pages"'}},tug:{defaultValue:{value:.4},description:"",name:"tug",required:!1,type:{name:"number"}},power:{defaultValue:{value:.25},description:"",name:"power",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/carousel.tsx#useCarousel"]={docgenInfo:useCarousel.__docgenInfo,name:"useCarousel",path:"src/carousel.tsx#useCarousel"})}catch(__react_docgen_typescript_loader_error){}try{Carousel.displayName="Carousel",Carousel.__docgenInfo={description:"",displayName:"Carousel",props:{current:{defaultValue:null,description:"",name:"current",required:!0,type:{name:"number"}},setCurrent:{defaultValue:null,description:"",name:"setCurrent",required:!0,type:{name:"(page: number) => void"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"number"}},setTotal:{defaultValue:null,description:"",name:"setTotal",required:!0,type:{name:"(amount: number) => void"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"(childIndex: number) => boolean"}},setIsActive:{defaultValue:null,description:"",name:"setIsActive",required:!0,type:{name:"(update: () => IsActive) => void"}},snapTo:{defaultValue:{value:"pages"},description:"",name:"snapTo",required:!1,type:{name:'"elements" | "pages"'}},tug:{defaultValue:{value:.4},description:"",name:"tug",required:!1,type:{name:"number"}},power:{defaultValue:{value:.25},description:"",name:"power",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | { toString: () => string; }"}},full:{defaultValue:{value:!1},description:"",name:"full",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/carousel.tsx#Carousel"]={docgenInfo:Carousel.__docgenInfo,name:"Carousel",path:"src/carousel.tsx#Carousel"})}catch(__react_docgen_typescript_loader_error){}}},[[262,1,2]]]);
//# sourceMappingURL=main.3a46b7fd51b27923bd73.bundle.js.map